% neurips_2025.sty
% NeurIPS 2025 style file
% Based on NeurIPS 2024 template
% https://neurips.cc/

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{neurips_2025}[2025/01/01 NeurIPS 2025 submission style]

% Options
\newif\if@final\@finalfalse
\newif\if@preprint\@preprintfalse
\newif\if@nonatbib\@nonatbibfalse

\DeclareOption{final}{\@finaltrue}
\DeclareOption{preprint}{\@preprinttrue}
\DeclareOption{nonatbib}{\@nonatbibtrue}
\ProcessOptions\relax

% Page layout
\RequirePackage[verbose=true,letterpaper]{geometry}
\AtBeginDocument{
  \newgeometry{
    textheight=9in,
    textwidth=5.5in,
    top=1in,
    headheight=12pt,
    headsep=25pt,
    footskip=30pt
  }
  \@ifpackageloaded{fullpage}{\PackageWarning{neurips_2025}{fullpage package detected - this may cause formatting issues}}{}
}

% Fonts
\renewcommand{\rmdefault}{ptm}
\renewcommand{\sfdefault}{phv}

% Line spacing
\RequirePackage{setspace}
\setstretch{1}

% Paragraph formatting
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt}

% Title formatting
\def\@maketitle{%
  \vbox to 0pt{}%
  \vskip 0.5in
  \begin{center}%
    {\LARGE\bfseries \@title \par}%
    \vskip 0.3in
    \if@final
      {\large
        \lineskip .5em%
        \begin{tabular}[t]{c}%
          \@author
        \end{tabular}\par}%
    \else
      \if@preprint
        {\large
          \lineskip .5em%
          \begin{tabular}[t]{c}%
            \@author
          \end{tabular}\par}%
      \else
        {\large Anonymous Author(s)\par}%
        {\large Affiliation\par}%
        {\large Address\par}%
        {\large \texttt{email}\par}%
      \fi
    \fi
    \vskip 0.3in
  \end{center}
}

% Abstract
\renewenvironment{abstract}%
{%
  \centerline{\large\bfseries Abstract}%
  \vspace{0.5ex}%
  \begin{quote}%
}%
{%
  \par%
  \end{quote}%
  \vskip 1ex%
}

% Section formatting
\RequirePackage{titlesec}
\titleformat{\section}{\large\bfseries}{\thesection}{1em}{}
\titleformat{\subsection}{\normalsize\bfseries}{\thesubsection}{1em}{}
\titleformat{\subsubsection}{\normalsize\itshape}{\thesubsubsection}{1em}{}

\titlespacing*{\section}{0pt}{12pt plus 4pt minus 2pt}{6pt plus 2pt minus 2pt}
\titlespacing*{\subsection}{0pt}{10pt plus 3pt minus 1pt}{4pt plus 2pt minus 1pt}
\titlespacing*{\subsubsection}{0pt}{8pt plus 2pt minus 1pt}{2pt plus 1pt minus 1pt}

% Footnotes
\renewcommand\footnoterule{%
  \kern-3\p@
  \hrule width 2in
  \kern 2.6\p@
}

% Bibliography
\if@nonatbib\else
  \RequirePackage{natbib}
  \setlength{\bibsep}{0pt plus 0.3ex}
  \bibliographystyle{abbrvnat}
\fi

% Headers/footers for non-final version
\if@final\else
  \if@preprint\else
    \RequirePackage{fancyhdr}
    \pagestyle{fancy}
    \fancyhf{}
    \fancyhead[C]{Submitted to NeurIPS 2025}
    \fancyfoot[C]{\thepage}
    \renewcommand{\headrulewidth}{0pt}
  \fi
\fi

% Line numbers for review
\if@final\else
  \if@preprint\else
    \RequirePackage{lineno}
    \linenumbers
  \fi
\fi

% Float placement
\renewcommand{\topfraction}{0.9}
\renewcommand{\bottomfraction}{0.9}
\renewcommand{\textfraction}{0.1}
\renewcommand{\floatpagefraction}{0.8}

% Hyperlinks (subdued colors for printing)
\RequirePackage{hyperref}
\hypersetup{
  colorlinks=true,
  linkcolor=black,
  citecolor=black,
  urlcolor=blue
}

% Acknowledgments environment (hidden in non-final)
\newenvironment{acknowledgments}{%
  \if@final
    \section*{Acknowledgments}
  \else
    \if@preprint
      \section*{Acknowledgments}
    \else
      \section*{Acknowledgments (will be hidden in submission)}
    \fi
  \fi
}{}

\endinput
